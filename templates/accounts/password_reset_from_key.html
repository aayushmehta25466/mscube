{% extends "layouts/auth_base.html" %}
{% load i18n %}

{% block title %}Set New Password - MScube Gym{% endblock %}
{% block heading %}Create New Password{% endblock %}
{% block subheading %}Choose a strong password for your account{% endblock %}

{% block content %}
{% if token_fail %}
<div class="space-y-4 w-full text-center">
    <div class="mx-auto h-10 w-10 rounded-full bg-danger/15 flex items-center justify-center text-danger">
        <i class="fa-solid fa-circle-exclamation text-sm" aria-hidden="true"></i>
    </div>
    <p class="text-sm text-text-secondary">This reset link is invalid or has expired.</p>
    <a href="{% url 'account_reset_password' %}" class="block w-full text-white bg-primary hover:bg-accent focus:ring-4 focus:outline-none focus:ring-primary/30 font-semibold rounded-lg text-sm px-5 py-2.5 text-center transition-colors">
        Request New Link
    </a>
</div>
{% else %}
<form method="post" class="space-y-5 w-full">
    {% csrf_token %}

    {% if form.non_field_errors %}
    <div class="bg-danger/10 border border-danger/30 text-danger text-sm p-3 rounded-lg">{{ form.non_field_errors }}</div>
    {% endif %}

    <div>
        <label for="id_password1" class="block text-sm font-medium text-text-secondary mb-2">New Password</label>
        <input id="id_password1" name="password1" type="password" required autocomplete="new-password" class="block w-full min-w-0 bg-dark-bg/60 border border-border text-white text-sm rounded-lg focus:ring-2 focus:ring-primary/30 focus:border-primary outline-none px-3 py-2.5 transition-colors" placeholder="Enter new password">
        {% if form.password1.errors %}<p class="mt-1 text-xs text-danger">{{ form.password1.errors.0 }}</p>{% endif %}
    </div>

    <div>
        <label for="id_password2" class="block text-sm font-medium text-text-secondary mb-2">Confirm Password</label>
        <input id="id_password2" name="password2" type="password" required autocomplete="new-password" class="block w-full min-w-0 bg-dark-bg/60 border border-border text-white text-sm rounded-lg focus:ring-2 focus:ring-primary/30 focus:border-primary outline-none px-3 py-2.5 transition-colors" placeholder="Repeat new password">
        {% if form.password2.errors %}<p class="mt-1 text-xs text-danger">{{ form.password2.errors.0 }}</p>{% endif %}
    </div>

    <button type="submit" class="w-full text-white bg-primary hover:bg-accent focus:ring-4 focus:outline-none focus:ring-primary/30 font-semibold rounded-lg text-sm px-5 py-2.5 text-center transition-colors">
        Update Password
    </button>
</form>
{% endif %}
{% endblock %}
